from collections import Counter

from src.mahjong.tile import Tile
from src.mahjong.deck import deck


def fill_missing_tiles(deck_front: list[Tile], deck_back: list[Tile]):
    count_deck = Counter(deck)
    count_deck.subtract(deck_front)
    count_deck.subtract(deck_back)
    assert (-count_deck).total() == 0
    return deck_front + list(count_deck.elements()) + deck_back


test_deck1 = fill_missing_tiles(
    [
        1,
        2,
        3,
        4,
        1,
        2,
        3,
        4,
        11,
        11,
        11,
        11,
        12,
        12,
        12,
        12,
        5,
        6,
        7,
        8,
        5,
        6,
        7,
        8,
        13,
        13,
        13,
        13,
        14,
        14,
        14,
        14,
        9,
        21,
        21,
        21,
        9,
        9,
        9,
        21,
        15,
        15,
        15,
        15,
        16,
        16,
        16,
        16,
        17,
        17,
        17,
        17,
        1,
        1,
        2,
        2,
        3,
        3,
        4,
        4,
        5,
        5,
        6,
        6,
        7,
        7,
    ],
    [
        8,
        8,
    ],
)

test_deck2 = fill_missing_tiles(
    [
        1,
        1,
        1,
        1,
        2,
        2,
        2,
        2,
        11,
        11,
        11,
        12,
        3,
        3,
        3,
        3,
        4,
        4,
        4,
        4,
        5,
        5,
        5,
        5,
        12,
        12,
        31,
        31,
        6,
        6,
        6,
        6,
        7,
        7,
        7,
        13,
        7,
        13,
        13,
        13,
        32,
        32,
        32,
        14,
        8,
        8,
        8,
        8,
        41,
        42,
        15,
        9,
        9,
        9,
        16,
        9,
        21,
        21,
        21,
        21,
        22,
        22,
        22,
        22,
        23,
        23,
        23,
        23,
    ],
    [
        36,
        37,
        43,
    ],
)

test_deck3 = fill_missing_tiles(
    [
        1,
        1,
        1,
        1,
        2,
        2,
        2,
        2,
        3,
        3,
        3,
        3,
        4,
        4,
        4,
        4,
        5,
        5,
        5,
        5,
        6,
        6,
        6,
        6,
        7,
        7,
        7,
        7,
        8,
        8,
        8,
        8,
        11,
        11,
        11,
        11,
        12,
        12,
        12,
        12,
        13,
        13,
        13,
        13,
        14,
        14,
        14,
        14,
        41,
        42,
        9,
        9,
        43,
        19,
        45,
        19,
        21,
        21,
        21,
        21,
    ],
    [
        34,
        46,
        35,
        36,
        37,
        44,
    ],
)

test_deck4 = fill_missing_tiles(
    [
        13,
        1,
        1,
        1,
        11,
        12,
        2,
        2,
        13,
        13,
        3,
        3,
        21,
        21,
        21,
        21,
        4,
        4,
        4,
        4,
        5,
        5,
        5,
        5,
        6,
        6,
        6,
        6,
        22,
        22,
        22,
        22,
        7,
        7,
        7,
        7,
        8,
        8,
        8,
        8,
        9,
        9,
        9,
        9,
        23,
        23,
        23,
        23,
        31,
        31,
        31,
        13,
        32,
        32,
        32,
        32,
        33,
        33,
        33,
        33,
    ],
    [],
)
